{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "RabbitMQ Connector",
  "id": "io.camunda.connectors.RabbitMQ.v1",
  "description": "Send message to RabbitMQ",
  "documentationRef": "https://docs.camunda.io/docs/components/integration-framework/connectors/out-of-the-box-connectors/rabbit-mq/",
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "appliesTo": [
    "bpmn:Task"
  ],
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "authentication",
      "label": "Authentication"
    },
    {
      "id": "routing",
      "label": "Routing"
    },
    {
      "id": "message",
      "label": "Message"
    },
    {
      "id": "output",
      "label": "Output Mapping"
    }
  ],
  "properties": [
    {
      "type": "Hidden",
      "value": "io.camunda:rabbit-mq:1",
      "binding": {
        "type": "zeebe:taskDefinition:type"
      }
    },
    {
      "id": "connectionType",
      "label": "Connection Type",
      "group": "authentication",
      "type": "Dropdown",
      "value": "uri",
      "binding": {
        "type": "zeebe:input",
        "name": "authentication.connectionType"
      },
      "choices": [
        {
          "name": "URI",
          "value": "uri"
        },
        {
          "name": "Username/Password",
          "value": "credentials"
        }
      ]
    },
    {
      "label": "URI",
      "description": "URI should contain username, password, host name, port number, and virtual host",
      "group": "authentication",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "authentication.uri"
      },
      "constraints": {
        "notEmpty": true,
        "pattern": {
          "value": "amqp://.*",
          "message": "Must start with amqp://"
        }
      },
      "condition": {
        "property": "connectionType",
        "equals": "uri"
      }
    },
    {
      "label": "Username",
      "group": "authentication",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "authentication.userName"
      },
      "constraints": {
        "notEmpty": true
      },
      "condition": {
        "property": "connectionType",
        "equals": "credentials"
      }
    },
    {
      "label": "Password",
      "group": "authentication",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "authentication.password"
      },
      "constraints": {
        "notEmpty": true
      },
      "condition": {
        "property": "connectionType",
        "equals": "credentials"
      }
    },
    {
      "label": "Routing Data",
      "description": "Include 'Virtual host', 'Host name', 'Port', 'Exchange', 'Routing key'.",
      "feel":"required",
      "group": "routing",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "routing"
      },
      "constraints": {
        "notEmpty": true
      },
      "condition": {
        "property": "connectionType",
        "equals": "credentials"
      }
    },
    {
      "label": "Message",
      "description": "Data to send to RabbitMQ",
      "group": "message",
      "type": "Text",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "message.body"
      }
    },
    {
      "label": "Properties",
      "description": "Properties for the message, routing headers, etc.",
      "group": "message",
      "type": "Text",
      "feel": "required",
      "binding": {
        "type": "zeebe:input",
        "name": "message.properties"
      }
    },
    {
      "label": "Result Variable",
      "description": "Enter name of variable to store the response in",
      "group": "output",
      "type": "String",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultVariable"
      }
    },
    {
      "label": "Result Expression",
      "description": "Expression to map the response into process variables",
      "group": "output",
      "type": "Text",
      "feel": "required",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultExpression"
      }
    }
  ],
  "icon": {
    "contents": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjcxcHgiIGhlaWdodD0iMjcxcHgiIHZpZXdCb3g9Ii03LjUgMCAyNzEgMjcxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj48cGF0aCBkPSJNMjQ1LjQ0IDEwOC4zMDhoLTg1LjA5YTcuNzM4IDcuNzM4IDAgMCAxLTcuNzM1LTcuNzM0di04OC42OEMxNTIuNjE1IDUuMzI3IDE0Ny4yOSAwIDE0MC43MjYgMGgtMzAuMzc1Yy02LjU2OCAwLTExLjg5IDUuMzI3LTExLjg5IDExLjg5NHY4OC4xNDNjMCA0LjU3My0zLjY5NyA4LjI5LTguMjcgOC4zMWwtMjcuODg1LjEzM2MtNC42MTIuMDI1LTguMzU5LTMuNzE3LTguMzUtOC4zMjVsLjE3My04OC4yNDFDNTQuMTQ0IDUuMzM3IDQ4LjgxNyAwIDQyLjI0IDBIMTEuODlDNS4zMjEgMCAwIDUuMzI3IDAgMTEuODk0VjI2MC4yMWMwIDUuODM0IDQuNzI2IDEwLjU2IDEwLjU1NSAxMC41NkgyNDUuNDRjNS44MzQgMCAxMC41Ni00LjcyNiAxMC41Ni0xMC41NlYxMTguODY4YzAtNS44MzQtNC43MjYtMTAuNTYtMTAuNTYtMTAuNTZ6bS0zOS45MDIgOTMuMjMzYzAgNy42NDUtNi4xOTggMTMuODQ0LTEzLjg0MyAxMy44NDRIMTY3LjY5Yy03LjY0NiAwLTEzLjg0NC02LjE5OS0xMy44NDQtMTMuODQ0di0yNC4wMDVjMC03LjY0NiA2LjE5OC0xMy44NDQgMTMuODQ0LTEzLjg0NGgyNC4wMDVjNy42NDUgMCAxMy44NDMgNi4xOTggMTMuODQzIDEzLjg0NHYyNC4wMDV6IiBmaWxsPSIjRjYwIi8+PC9zdmc+"
  }
}